name: Deploy via SFTP

on:
  push:
    branches:
      - main

jobs:
  web-deploy:
    name: üéâ Deploy
    runs-on: ubuntu-latest
    steps:
      - name: üöö Get latest code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # –í–∞–∂–Ω–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

      - name: üìÇ Sync files
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.SFTP_HOST }}
          username: ${{ secrets.SFTP_USER }}
          password: ${{ secrets.SFTP_PASSWORD }}
          protocol: ftp        # –í–∞–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª
          local-dir: ./         # –û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã (–∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ)
          server-dir: /slovotron.fra3a.ru/         # –ö—É–¥–∞ –∫–ª–∞—Å—Ç—å (–æ–±—ã—á–Ω–æ –∫–æ—Ä–µ–Ω—å –∏–ª–∏ public_html)
          exclude: |            # –ß—Ç–æ –ù–ï –≥—Ä—É–∑–∏—Ç—å
            **/.git*
            **/.github*
            **/node_modules/**
            **/test/**
            **/readme.md